@using System.Text.RegularExpressions;
@using System.Web
<style>
	.pdf-embed {
		overflow: hidden !important;
		height: auto;
		width: 100%;
		padding-bottom: 47%;
		position: relative;
		margin: auto;
	}

		.pdf-embed embed,
		.pdf-embed object {
			height: 100%;
			position: absolute;
			margin: auto;
			width: 100%;
		}

		.pdf-embed iframe {
			height: 80vh;
			position: absolute;
			margin: auto;
			width: 100%;
		}
</style>

@if (ViewMode == "overview")
{
	@if (board.Projects != null && board.Projects.Count == 1)
	{
		<div>Part of the <a href="@board.Projects.First().ProjectHref">@board.Projects.First().ProjectTitle</a> Project</div>
	}
	else if (board.Projects != null && board.Projects.Count == 2)
	{
		<div>Part of the <a href="@board.Projects.First().ProjectHref">@board.Projects.First().ProjectTitle</a> and <a href="@board.Projects.ElementAt(1).ProjectHref">@board.Projects.ElementAt(1).ProjectTitle</a>  Projects</div>
	}
	<div style="display:inline-flex">
		<div style="display:flex; padding:50px;">
			<img src="@board.BoardMainImage">
		</div>
		<div style="display:flex; padding:50px;">
			
			<div>
				@((MarkupString)Regex.Replace(HttpUtility.HtmlEncode(board.BoardDescription), "\n", "<br />"))
			</div>
		</div>
	</div>

}
else if (ViewMode == "pdf")
{

	<div class="pdf-embed">
		<object data="@normalPDF(board.BoardPDF)" type="application/pdf">
		</object>
	</div>
}

@code {
	[Parameter] public Board board { get; set; }
	[Parameter] public string ViewMode { get; set; } = "overview";
	private string PDFprefix = @"https://drive.google.com/viewerng/viewer?embedded=true&url=";
	private string googlePDFPrefix = "https://docs.google.com/viewer?url=https://zacharykilburn.com/";
	private string PDFsuffix = @"#toolbar=0&navpanes=0&view=FitWidth";

	//<iframe src="@buildgoogleURL(board.BoardPDF)" style="width:100%; height:650px;" frameborder="0"></iframe>
	private string normalPDF(string pdffile)
	{
		return pdffile + PDFsuffix;
	}
	private string buildPDFURL(string pdffile)
	{
		return PDFprefix + pdffile;
	}
	private string buildgoogleURL(string pdffile)
	{
		return googlePDFPrefix + pdffile + "&embedded=true";
	}
}
