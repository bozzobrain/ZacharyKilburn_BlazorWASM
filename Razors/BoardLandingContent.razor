@using System.Text.RegularExpressions;
@using System.Web
<style>
	.pdf-embed {
		overflow: hidden !important;
		height: auto;
		width: 100%;
		padding-bottom: 47%;
		position: relative;
		margin: auto;
	}

		.pdf-embed embed,
		.pdf-embed object {
			height: 100%;
			position: absolute;
			margin: auto;
			width: 100%;
		}

		.pdf-embed iframe{
			height: 80vh;
			position: absolute;
			margin: auto;
			width: 100%;
		}
		</style>

@if (ViewMode == "overview")
{
	<h3>@board.BoardPN - @board.BoardTitle - Overview</h3>
	<img src="@board.BoardMainImage">
	<div>
		<br />
		@if (board.Projects != null && board.Projects.Count == 1)
		{
			<p>Part of the <a href="@board.Projects.First().ProjectHref">@board.Projects.First().ProjectTitle</a> Project</p>
		}
		else if (board.Projects != null && board.Projects.Count == 2)
		{
			<p>Part of the <a href="@board.Projects.First().ProjectHref">@board.Projects.First().ProjectTitle</a> and <a href="@board.Projects.ElementAt(1).ProjectHref">@board.Projects.ElementAt(1).ProjectTitle</a>  Projects</p>
		}
		<br />
		@((MarkupString)Regex.Replace(HttpUtility.HtmlEncode(board.BoardDescription), "\n", "<br />"))
	</div>

}
else if (ViewMode == "pdf")
{
	<h3>@board.BoardPN - @board.BoardTitle - PDF</h3>

	<div class="pdf-embed">
		<object data="@normalPDF(board.BoardPDF)" type="application/pdf">
			<iframe src="@buildgoogleURL(board.BoardPDF)" style="width:100%; height:650px;" frameborder="0"></iframe>
		</object>
	</div>
}

@code {
	[Parameter] public Board board { get; set; }
	[Parameter] public string ViewMode { get; set; } = "overview";
	private string PDFprefix = @"https://drive.google.com/viewerng/viewer?embedded=true&url=";
	private string googlePDFPrefix = "https://docs.google.com/viewer?url=https://zacharykilburn.com/";
	private string PDFsuffix = @"#toolbar=0&navpanes=0&view=Fit";


	private string normalPDF(string pdffile)
	{
		return pdffile + PDFsuffix;
	}
	private string buildPDFURL(string pdffile)
	{
		return PDFprefix + pdffile;
	}
	private string buildgoogleURL(string pdffile)
	{
		return googlePDFPrefix + pdffile + "&embedded=true";
	}
}
